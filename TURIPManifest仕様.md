# TURIPマニフェスト仕様

## 概要

マニフェストはTURIPデバイスの利用方法を知ることのできるJSONフォーマットからなるテキストデータです。
マニフェストはTURIP管理組織のリポジトリ(manifest.turio.org)に保管されます。

## データ構造

マニフェストのエンコードはUTF-8です。

### 必須な要素

TURIPのManifestを構成する上で必須となる要素のリストです。

Key      | Value type | 概要
---------|------------|---------------------------------------------------
protocol | string     | TURIPであるかどうかと、TURIPのバージョンを示します
model    | string     | TURIP型番を16進数表記で示します
port     | object[]   | TURIPデバイスのポート構成を定義します

#### "protocol"

"TURIP0.20"を保持します。

#### "model"

TURIP型番を16進数表記で示します。

#### "port"

TURIPデバイスのポート構成を定義します。値は、portオブジェクト(後述)の配列です。

### オプション

必須ではないキーです。

Key       | Value type | 概要
----------|------------|--------------------------------
profile   | object[]   | プロファイルの定義を行います
extention | string[]   | TURIP拡張仕様への対応を示します

#### "profile"

TURIPモジュールが対応するプロファイルのリストです。
値は、profileオブジェクトの配列です。

### 独特なオブジェクト

Manifestで用いられるオブジェクトは次の通りです。

#### portオブジェクト

portオブジェクトは、TURIPモジュールにどのようなポートが存在するかを示すものです。
以下に構造を示します。

Key         | Value type | 概要
------------|------------|-----------------------------
number      | number     | ポート番号
name        | string     | ポート名
description | string     | ポートの説明
type        | string     | TURIPデータ型
permission  | string     | ポートへの読み書き許可
profile     | string     | 対応するプロファイルの要素名

##### numberキー

このキーは必須です。
ポート番号を記述します。

##### nameキー

このキーは必須です。
ポートの名前です。

##### descriptionキー

このキーはオプション(推奨)です。
ポートの説明を記述します。

##### typeキー

このキーは必須です。
TURIPデータ型を記述します。

##### permissionキー

このキーはオプションです。ポートの読み書きに制限があるかどうかを示します。
値は以下の通りです。

Value | 説明
------|-------------
"RO"  | 読み取り専用
"WO"  | 書き込み専用
"RW"  | 読み書き可能

##### profileキー

このキーはオプションです。
ポートがプロファイルの構成要素である場合に記述します。
インスタンス名.プロパティ名で指定してください。

#### profileオブジェクト

profileオブジェクトは、TURIPデバイスが対応しているプロファイルの1種類を定義できます。
キーはプロファイル名で、値はインスタンス名のリスト(string)です。
例えば、buttonプロファイルのインスタンスを3つ定義する場合は以下のようになります。

`"button":["button1","button2","button3"]`

## プロファイル

Manifestではプロファイルを定義する場合があります。
プロファイルは、異なるTURIPモジュール間で互換性を確保する、
コンピュータが、そのモジュールの機能を理解するのを助けるといった目的があります。
