# TURIPonHTTP仕様

## 概要

TURIPonHTTPは、HTTP上でTURIPを動作させるための仕様です。
TURIPモジュールはWebAPIサーバとして動作し、IoTアプリケーション開発を容易にします。

## 物理仕様、電気的仕様、ロジック仕様

TURIPonHTTPでは、物理仕様、電気的仕様、ロジック仕様を定義しません。
Webサーバとして動作できる環境下にあるということを条件とします。

## API仕様

TURIPonHTTPでは、GETメソッドとPOSTメソッドのみを使用します。

### ポートの読み込み

ポートからデータを読み込む際は、以下のようにします。

`GET [host]/turip/[ポート番号]`

TURIPモジュールからの応答はJSON形式となります。
JSONオブジェクトの中身は次の通りです。

Key    | Value type         | 概要
-------|--------------------|------------------------------------
status | string             | TURIPデバイスからのステータスコード
port   | number             | アクセスしたポート番号
type   | string             | ポートに格納されているデータの型
data   | (ポート内容に依存)     | ポートに格納されているデータ本体

### ポートへの書き出し

ポートへデータを書き込む場合は、以下のようにします。

`POST [host]/turip/[ポート番号]`

POSTの内容はURLエンコードしたもので、JSON形式です。
JSONオブジェクトの中身は以下の通りです。

Key  | Value type         | 概要
-----|--------------------|-----------------------------
data | (ポート内容に依存)     | ポートにセットするデータ内容

TURIPモジュールからの応答はGETした時と同様です。

### TURIP bridge

TURIP bridgeに対応している場合、

`GET [host]/turip/`

で、接続されているモジュールのIDを確認できます。
このとき、JSONオブジェクトで以下のように応答されます。

Key      | Value type | 概要
---------|------------|--------------------------------------
bridge[] | string     | 接続されているTURIPデバイスのIDの配列

また、

`GET/POST [host]/turip/[ID]/[ポート番号]`

で、TURIP bridgeを介してのやりとりができます。
応答の中身は次の通りです。

Key    | Value type         | 概要
-------|--------------------|------------------------------------
id     | string             | 対象となったTURIPデバイスのID
status | string             | TURIPデバイスからのステータスコード
port   | number             | アクセスしたポート番号
type   | string             | ポートに格納されているデータの型
data   | (ポート内容に依存)     | ポートに格納されているデータ本体
