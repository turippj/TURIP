# TURIPonUART仕様

## 概要

TURIPonUARTは、UART上でTURIPを動作させるための仕様です。
テキストベースかつ対話式な仕様なため、人が直接TURIPモジュールとやりとりすることが可能なのが特徴です。

## コネクタ仕様

ただし、TURIPonUARTの標準的なコネクタとしてJST-GHコネクタを推奨します。
ピンアサインは次の通りとなります。
4番ピンはオープンですが、マイコンのリセットピンなどと接続し、セルフプログラミング等に用いることも可能です。

ピン番号 | 機能
-------|-----
1      | TX
2      | RX
3      | 3.3V
4      | nc
5      | GND

ただし、必要に応じてコネクタは自由に決めることができます。

## 電気的仕様

電源電圧およびロジックレベルは3.3Vです。
詳細な仕様を以下に示します。

項目             | 記号   | typ. | min | max | 単位 |
----------------|-------|------|-----|-----|-----|
電源電圧          | Vcc   | 3.3  | 3.0 | 3.5 | V   |
供給電流          | Im    | -    | -   | 1.0 | A   |
ロジック電圧(High) | Vhigh | 3.3  | 2.5 | Vcc | V   |
ロジック電圧(Low)  | Vlow  | 0.0  | 0.0 | 0.5 | V   |

## ロジック仕様

TURIPデバイスは、最初にセーフモードで立ち上がります。
このときのボーレートは9600bpsです。
パリティービットはありません。

## コマンド体系

TURIPonUARTコマンドは、HTTPライクなものです。
コマンドは`<LF>`または`<CR><LF>`で終端されます。
また、TURIPデバイスからの応答はJSON形式となります。

### ポートへの読み書き

TURIPデバイスからの読み込みにはgetコマンドを用います。書式は以下の通りです。

`get [port]<LF>`

また、書き込みにはpostコマンドを用います。書式は以下の通りです。

`post [port] [データ]<LF>`

TURIPモジュールからの応答はJSON形式となります。
JSONオブジェクトの中身は次の通りです。

Key    | Value type         | 概要
-------|--------------------|------------------------------------
status | string             | TURIPデバイスからのステータスコード
port   | number             | アクセスしたポート番号
type   | string             | ポートに格納されているデータの型
data   | (ポート内容に依存)     | ポートに格納されているデータ本体

### TURIP bridge

TURIP bridgeに対応している場合、読み込みの書式は以下の通りです。

`get [id]/[port]<LF>`

また、書き込みの書式は以下の通りです。

`post [id]/[port] [データ]<LF>`
